@using Beyova;
@using Beyova.Gravity;
@{
    var broadcastAlert = ViewBag.BroadcastAlert == null ? null : ViewBag.BroadcastAlert.ToString();
    var currentUserInfo = ContextHelper.CurrentUserInfo;

}
<!DOCTYPE html>
<!--[if IE 9 ]><html class="ie ie9" lang="en" class="no-js"> <![endif]-->
<!--[if !(IE)]><!-->
<html lang="en" class="no-js">
<!--<![endif]-->

<head>
    <title>@ViewBag.Title</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <!-- CSS -->
    <link rel="stylesheet" href="@(Url.Content("~/Content/bootstrap.min.css"))">
    <link rel="stylesheet" href="@(Url.Content("~/Content/font-awesome.min.css"))">
    <link rel="stylesheet" href="@(Url.Content("~/Beyova/css/king/main.css"))">

    <link rel="stylesheet" href="@(Url.Content("~/Beyova/css/bootstrap-select.min.css"))">
    @*<link rel="stylesheet" href="@(Url.Content("~/Beyova/css/datepicker3.css"))">*@
    <!--[if lte IE 9]>
        <link href="@(Url.Content("~/Beyova/css/king/main-ie.css"))" rel="stylesheet" type="text/css"/>
        <link href="@(Url.Content("~/Beyova/css/king/main-ie-part2.css"))" rel="stylesheet" type="text/css"/>
    <![endif]-->

    <link rel="stylesheet" href="@(Url.Content("~/Beyova/css/overall-customize.css"))">
    <link rel="stylesheet" href="@(Url.Content("~/Beyova/css/king-customize.css"))">
    @RenderSection("css", false)

    <script src="@(Url.Content("~/Scripts/jquery-3.1.1.min.js"))"></script>
    <script src="@(Url.Content("~/Scripts/bootstrap.min.js"))"></script>
</head>
<body class="dashboard">
    <!-- WRAPPER -->
    <div class="wrapper">
        <!-- TOP BAR -->
        <div class="top-bar">
            <div class="container">
                <div class="row">
                    <!-- logo -->
                    <div class="col-md-2 logo">
                        @Html.Partial("~/Views/Shared/_Logo.cshtml")
                    </div>
                    <!-- end logo -->
                    <div class="col-md-10">
                        <div class="row">
                            <div class="col-md-3" >
                                <div style="min-height: 35px;"><!-- placeholder --></div>
                                <!--

                                      <div class="btn-group bootstrap-select show-tick form-control" id="productNavigation">
                                    <button type="button" class="btn dropdown-toggle btn-default" data-toggle="dropdown" data-id="productNavigation" title="" aria-expanded="false">
                                        <span class="filter-option pull-left"></span>&nbsp;<span class="bs-caret"><span class="caret"></span></span>
                                    </button>


                                    <div class="dropdown-menu open" style="max-height: 577px; overflow: hidden; min-height: 92px;">
                                        <ul class="dropdown-menu inner" role="menu" style="max-height: 565px; overflow-y: auto; min-height: 80px;">
                                            @{
                                                foreach (var one in WebCore.ProductCache.GetAll())
                                                {
                                                    var isSelected = one.Key.Equals(CentralManagementContext.ProductKey) ? "class=\"selected\"" : string.Empty;
                                                    <text>
                                                        <li data-original-index="0" @(Html.Raw(isSelected))>
                                                            <a tabindex="0" href="@(Request.Url.SetQueryString("productKey",one.Key.ToString() ).ToString())">
                                                                <span class="text">@one.Name</span><span class="glyphicon glyphicon-ok check-mark"></span>
                                                            </a>
                                                        </li>
                                                    </text>
                                                }
                                            }
                                        </ul>
                                    </div>
                                </div>
                                            -->
                            </div>
                            <div class="col-md-9">
                                <div class="top-bar-right">
                                    <!-- responsive menu bar icon -->
                                    <a href="#" class="hidden-md hidden-lg main-nav-toggle"><i class="fa fa-bars"></i></a>
                                    <!-- end responsive menu bar icon -->
                                    <!-- logged user and the menu -->
                                    <div class="logged-user">
                                        <div class="btn-group">
                                            <a href="#" class="btn btn-link dropdown-toggle" data-toggle="dropdown">
                                                @*<img src="@(currentUserInfo == null ? string.Empty : currentUserInfo.AvatarUrl)" alt="User Avatar" width="30" height="30" />*@
                                                <span class="name">@(currentUserInfo == null ? string.Empty : currentUserInfo.Name.SafeToString())</span> <span class="caret"></span>
                                            </a>
                                            <ul class="dropdown-menu" role="menu">
                                                @*<li>
                                                        <a href="@(Url.Action("Settings", "Account"))">
                                                            <i class="fa fa-cog"></i>
                                                            <span class="text">Settings</span>
                                                        </a>
                                                    </li>*@
                                                <li>
                                                    <a href="@(Url.Action("LogOut","Security"))">
                                                        <i class="fa fa-power-off"></i>
                                                        <span class="text">Log Out</span>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <!-- end logged user and the menu -->
                                </div>
                                <!-- /top-bar-right -->
                            </div>
                        </div>
                        <!-- /row -->
                    </div>
                </div>
                <!-- /row -->
            </div>
            <!-- /container -->
        </div>
        <!-- /top -->
        <!-- BOTTOM: LEFT NAV AND RIGHT MAIN CONTENT -->
        <div class="bottom">
            <div class="container">
                <div class="row">
                    <!-- left sidebar -->
                    @{
                        if (CentralManagementContext.ParameterProductKey.HasValue)
                        {
                            <text>
                                @Html.Partial("~/Views/Shared/beyova/layout/_ProductBasedSidebar.cshtml")
                            </text>
                        }
                        else
                        {
                            <text>
                                @Html.Partial("~/Views/Shared/_Sidebar.cshtml")
                            </text>
                        }
                    }

                    <!-- end left sidebar -->
                    @{
                        if (!string.IsNullOrWhiteSpace(broadcastAlert))
                        {
                            <text>
                                <div class="alert alert-danger top-general-alert">
                                    <span>@Html.Raw(broadcastAlert)</span>
                                    <button type="button" class="close">&times;</button>
                                </div>
                            </text>
                        }
                    }
                    <!-- content-wrapper -->
                    <div class="col-md-10 content-wrapper">
                        @RenderBody()
                    </div>
                    <!-- /content-wrapper -->
                </div>
                <!-- /row -->
            </div>
            <!-- /container -->
        </div>
        <!-- END BOTTOM: LEFT NAV AND RIGHT MAIN CONTENT -->
    </div>
    <!-- /wrapper -->
    <!-- FOOTER -->
    <footer class="footer">
        <div class="footer">
            <!--
                Copyright
            -->
        </div>
    </footer>
    <!-- END FOOTER -->
    <div id="modalContainer">
        @RenderSection("modal", false)
    </div>

    <!-- Javascript -->
    <script src="@(Url.Content("~/Beyova/js/jquery.form.js"))"></script>
    <script src="@(Url.Content("~/Beyova/js/validator.js"))"></script>
    <script src="@(Url.Content("~/Beyova/js/king/king-common.js"))"></script>

    <script src="@(Url.Content("~/Beyova/js/bootstrap-switch.min.js"))"></script>
    <script src="@(Url.Content("~/Beyova/js/bootstrap-multiselect.js"))"></script>
    <script src="@(Url.Content("~/Beyova/js/qrcode.min.js"))"></script>

    <script src="@(Url.Content("~/Beyova/js/bootstrap-select.js"))"></script>

    <script src="@(Url.Content("~/Beyova/js/jquery.sparkline.min.js"))"></script>
    <script src="@(Url.Content("~/Beyova/js/jquery.dataTables.min.js"))"></script>
    <script src="@(Url.Content("~/Beyova/js/jquery.gritter.min.js"))"></script>
    <script src="@(Url.Content("~/Beyova/js/bootstrap-datepicker.js"))"></script>

    <script src="@(Url.Content("~/Beyova/js/dataTables.bootstrap.js"))"></script>
    <script src="@(Url.Content("~/Beyova/js/king/king-chart-stat.js"))"></script>
    <script src="@(Url.Content("~/Beyova/js/king/king-table.js"))"></script>
    <script src="@(Url.Content("~/Beyova/js/king/king-components.js"))"></script>

    <script src="@(Url.Content("~/Beyova/js/beyova.js"))"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var url = window.location.pathname.toLocaleLowerCase();
            var index = url.indexOf("?");
            if (index > -1) {
                url = url.substr(0, index);
            }
            url = url.replace(/^\/|\/$/gm, '') + '/';

            var navItems = $("#side-menu").find("a[url]");
            for (var i = 0; i < navItems.length; i++) {
                var lnk = navItems.eq(i);
                if (url.indexOf(lnk.attr("url")) == 0) {
                    var li = lnk.closest("li");
                    li.addClass("active");
                    var ul = li.parent("ul");
                    if (ul.parent("li").length) {
                        ul.prev("a").click();
                    }
                }
            }

            $("#productNavigation").delegate("li a", "click", function (e) {
                var value = $(this).attr("value");
                if (value && window.location.toString().indexOf(value) < 0) {
                    window.location.href = value;
                }
            });
        });
    </script>
    @RenderSection("js", false)
    @RenderSection("plugin", false)

</body>

</html>
